<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Arcade Retro - Hub de Jeux</title>
    <link rel="stylesheet" href="arcade.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&family=Orbitron:wght@400;700;900&family=DotGothic16&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --retro-cyan: #00CED1;
            --retro-pink: #FF69B4;
            --retro-purple: #8A2BE2;
            --neon-green: #39FF14;
            --crt-black: #0A0A0A;
            --crt-dark: #1A1A2E;
            --crt-gray: #2D2D44;
            --crt-text: #E0E0FF;
            --crt-glow: rgba(0, 206, 209, 0.7);
        }
    </style>
</head>
<body>
    <!-- Cadre CRT -->
    <div class="crt-frame">
        <div class="crt-screen">
            <!-- Effets CRT -->
            <div class="tube-lines"></div>
            <div class="scanlines"></div>
            <div class="glare"></div>
            <div class="pixel-grid"></div>
            <div class="tv-noise"></div>
            
            <!-- Navigation -->
            <nav class="arcade-nav pixel-border">
                <a href="index.html" class="nav-btn pixel-border">
                    <i class="fas fa-home"></i> RETOUR
                </a>
                <h1 class="nav-title pixel-text">
                    <i class="fas fa-gamepad"></i> HUB D'ARCADE
                </h1>
                <a href="joueur.html" class="nav-btn pixel-border">
                    <i class="fas fa-user-secret"></i> PROFIL
                </a>
            </nav>
            
            <!-- En-tête avec infos joueur -->
            <header class="player-header">
                <div class="player-display pixel-border">
                    <div class="player-sprite" id="arcadePlayerSprite"></div>
                    <div class="player-info">
                        <h2 class="player-name pixel-text" id="arcadeUsername">JOUEUR_01</h2>
                        <div class="player-stats">
                            <div class="stat-chip pixel-border">
                                <i class="fas fa-coins"></i>
                                <span id="arcadeTokens">1000</span> <span class="stat-label">JETONS</span>
                            </div>
                            <div class="stat-chip pixel-border">
                                <i class="fas fa-bolt"></i>
                                <span id="playerEnergy">100</span> <span class="stat-label">ÉNERGIE</span>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="header-actions">
                    <button class="action-btn pixel-border" id="insertCoinBtn">
                        <i class="fas fa-coins"></i> INSÉRER JETON
                    </button>
                    <button class="action-btn pixel-border" id="musicToggle">
                        <i class="fas fa-volume-up"></i> SON: ON
                    </button>
                </div>
            </header>
            
            <!-- Contenu principal -->
            <main class="arcade-main">
                <!-- Titre principal -->
                <div class="arcade-title-section">
                    <h2 class="arcade-title pixel-text">
                        <span class="title-cyan">SÉLECTION</span>
                        <span class="title-pink">DES JEUX</span>
                    </h2>
                    <div class="arcade-subtitle">
                        <i class="fas fa-chevron-right blinking"></i>
                        CHOISISSEZ VOTRE AVENTURE 8-BIT
                        <i class="fas fa-chevron-left blinking"></i>
                    </div>
                </div>
                
                <!-- Filtres de catégories -->
                <div class="category-filters pixel-border">
                    <div class="filters-title">
                        <i class="fas fa-filter"></i>
                        <span>FILTRES ARCADE</span>
                    </div>
                    <div class="filter-buttons">
                        <button class="filter-btn pixel-border active" data-filter="all">
                            <i class="fas fa-gamepad"></i> TOUS
                        </button>
                        <button class="filter-btn pixel-border" data-filter="classic">
                            <i class="fas fa-ghost"></i> CLASSIQUES
                        </button>
                        <button class="filter-btn pixel-border" data-filter="action">
                            <i class="fas fa-rocket"></i> ACTION
                        </button>
                        <button class="filter-btn pixel-border" data-filter="puzzle">
                            <i class="fas fa-puzzle-piece"></i> RÉFLEXION
                        </button>
                        <button class="filter-btn pixel-border" data-filter="new">
                            <i class="fas fa-star"></i> NOUVEAUX
                        </button>
                    </div>
                </div>
                
                <!-- Grille de jeux -->
                <div class="games-grid" id="gamesGrid">
                    <!-- PAC-MAN -->
                    <div class="game-card pixel-border featured" data-category="classic" data-id="1">
                        <div class="game-header">
                            <div class="game-badge">
                                <span class="badge-text">N°1</span>
                            </div>
                            <div class="game-icon">
                                <i class="fas fa-ghost"></i>
                            </div>
                            <div class="game-cost">
                                <i class="fas fa-coins"></i>
                                <span>500</span>
                            </div>
                        </div>
                        <div class="game-info">
                            <h3 class="game-title pixel-text">PAC-ROMÂN</h3>
                            <p class="game-desc">Mangez les points, évitez les fantômes dans ce labyrinthe classique !</p>
                            <div class="game-stats">
                                <div class="stat">
                                    <i class="fas fa-users"></i>
                                    <span>12K</span>
                                </div>
                                <div class="stat">
                                    <i class="fas fa-star"></i>
                                    <span>4.8</span>
                                </div>
                                <div class="stat">
                                    <i class="fas fa-bolt"></i>
                                    <span>75</span>
                                </div>
                            </div>
                        </div>
                        <button class="play-btn pixel-border" data-game="1" data-cost="500">
                            <i class="fas fa-play"></i> LANCER
                        </button>
                    </div>
                    
                    <!-- SERPENT -->
                    <div class="game-card pixel-border" data-category="classic" data-id="2">
                        <div class="game-header">
                            <div class="game-badge">
                                <span class="badge-text">TOP</span>
                            </div>
                            <div class="game-icon">
                                <i class="fas fa-snake"></i>
                            </div>
                            <div class="game-cost">
                                <i class="fas fa-coins"></i>
                                <span>300</span>
                            </div>
                        </div>
                        <div class="game-info">
                            <h3 class="game-title pixel-text">ȘARPE</h3>
                            <p class="game-desc">Contrôlez un serpent qui grandit. Attention aux collisions !</p>
                            <div class="game-stats">
                                <div class="stat">
                                    <i class="fas fa-users"></i>
                                    <span>8.5K</span>
                                </div>
                                <div class="stat">
                                    <i class="fas fa-star"></i>
                                    <span>4.5</span>
                                </div>
                                <div class="stat">
                                    <i class="fas fa-bolt"></i>
                                    <span>60</span>
                                </div>
                            </div>
                        </div>
                        <button class="play-btn pixel-border" data-game="2" data-cost="300">
                            <i class="fas fa-play"></i> LANCER
                        </button>
                    </div>
                    
                    <!-- SPACE INVADERS -->
                    <div class="game-card pixel-border" data-category="action" data-id="3">
                        <div class="game-header">
                            <div class="game-badge">
                                <span class="badge-text">HOT</span>
                            </div>
                            <div class="game-icon">
                                <i class="fas fa-rocket"></i>
                            </div>
                            <div class="game-cost">
                                <i class="fas fa-coins"></i>
                                <span>400</span>
                            </div>
                        </div>
                        <div class="game-info">
                            <h3 class="game-title pixel-text">SPACE INV</h3>
                            <p class="game-desc">Défendez la Terre contre l'invasion alien !</p>
                            <div class="game-stats">
                                <div class="stat">
                                    <i class="fas fa-users"></i>
                                    <span>9.2K</span>
                                </div>
                                <div class="stat">
                                    <i class="fas fa-star"></i>
                                    <span>4.7</span>
                                </div>
                                <div class="stat">
                                    <i class="fas fa-bolt"></i>
                                    <span>85</span>
                                </div>
                            </div>
                        </div>
                        <button class="play-btn pixel-border" data-game="3" data-cost="400">
                            <i class="fas fa-play"></i> LANCER
                        </button>
                    </div>
                    
                    <!-- TETRIS -->
                    <div class="game-card pixel-border" data-category="puzzle" data-id="4">
                        <div class="game-header">
                            <div class="game-badge">
                                <span class="badge-text">POP</span>
                            </div>
                            <div class="game-icon">
                                <i class="fas fa-th-large"></i>
                            </div>
                            <div class="game-cost">
                                <i class="fas fa-coins"></i>
                                <span>350</span>
                            </div>
                        </div>
                        <div class="game-info">
                            <h3 class="game-title pixel-text">TETRIS</h3>
                            <p class="game-desc">Arrangez les blocs, complétez les lignes pour marquer !</p>
                            <div class="game-stats">
                                <div class="stat">
                                    <i class="fas fa-users"></i>
                                    <span>15K</span>
                                </div>
                                <div class="stat">
                                    <i class="fas fa-star"></i>
                                    <span>4.9</span>
                                </div>
                                <div class="stat">
                                    <i class="fas fa-bolt"></i>
                                    <span>70</span>
                                </div>
                            </div>
                        </div>
                        <button class="play-btn pixel-border" data-game="4" data-cost="350">
                            <i class="fas fa-play"></i> LANCER
                        </button>
                    </div>
                    
                    <!-- BREAKOUT -->
                    <div class="game-card pixel-border new" data-category="action" data-id="5">
                        <div class="game-header">
                            <div class="game-badge new-badge">
                                <span class="badge-text">NEW</span>
                            </div>
                            <div class="game-icon">
                                <i class="fas fa-baseball-ball"></i>
                            </div>
                            <div class="game-cost">
                                <i class="fas fa-coins"></i>
                                <span>250</span>
                            </div>
                        </div>
                        <div class="game-info">
                            <h3 class="game-title pixel-text">BREAKOUT</h3>
                            <p class="game-desc">Cassez toutes les briques avec une balle rebondissante !</p>
                            <div class="game-stats">
                                <div class="stat">
                                    <i class="fas fa-users"></i>
                                    <span>6.8K</span>
                                </div>
                                <div class="stat">
                                    <i class="fas fa-star"></i>
                                    <span>4.3</span>
                                </div>
                                <div class="stat">
                                    <i class="fas fa-bolt"></i>
                                    <span>55</span>
                                </div>
                            </div>
                        </div>
                        <button class="play-btn pixel-border" data-game="5" data-cost="250">
                            <i class="fas fa-play"></i> LANCER
                        </button>
                    </div>
                    
                    <!-- PONG -->
                    <div class="game-card pixel-border" data-category="classic" data-id="6">
                        <div class="game-header">
                            <div class="game-badge">
                                <span class="badge-text">VS</span>
                            </div>
                            <div class="game-icon">
                                <i class="fas fa-table-tennis"></i>
                            </div>
                            <div class="game-cost">
                                <i class="fas fa-coins"></i>
                                <span>200</span>
                            </div>
                        </div>
                        <div class="game-info">
                            <h3 class="game-title pixel-text">PONG</h3>
                            <p class="game-desc">Jeu de ping-pong classique à deux joueurs !</p>
                            <div class="game-stats">
                                <div class="stat">
                                    <i class="fas fa-users"></i>
                                    <span>5.4K</span>
                                </div>
                                <div class="stat">
                                    <i class="fas fa-star"></i>
                                    <span>4.2</span>
                                </div>
                                <div class="stat">
                                    <i class="fas fa-bolt"></i>
                                    <span>50</span>
                                </div>
                            </div>
                        </div>
                        <button class="play-btn pixel-border" data-game="6" data-cost="200">
                            <i class="fas fa-play"></i> LANCER
                        </button>
                    </div>
                    
                    <!-- MAZE RUNNER -->
                    <div class="game-card pixel-border new" data-category="puzzle" data-id="7">
                        <div class="game-header">
                            <div class="game-badge new-badge">
                                <span class="badge-text">Soon</span>
                            </div>
                            <div class="game-icon">
                                <i class="fas fa-maze"></i>
                            </div>
                            <div class="game-cost">
                                <i class="fas fa-coins"></i>
                                <span>280</span>
                            </div>
                        </div>
                        <div class="game-info">
                            <h3 class="game-title pixel-text">MAZE RUN</h3>
                            <p class="game-desc">Naviguez dans des labyrinthes complexes contre la montre !</p>
                            <div class="game-stats">
                                <div class="stat">
                                    <i class="fas fa-users"></i>
                                </div>
                                <div class="stat">
                                    <i class="fas fa-star"></i>
                                </div>
                                <div class="stat">
                                    <i class="fas fa-bolt"></i>
                                    <span>65</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- ASTEROIDS -->
                    <div class="game-card pixel-border" data-category="action" data-id="8">
                        <div class="game-header">
                            <div class="game-badge">
                                <span class="badge-text">SPACE</span>
                            </div>
                            <div class="game-icon">
                                <i class="fas fa-meteor"></i>
                            </div>
                            <div class="game-cost">
                                <i class="fas fa-coins"></i>
                                <span>320</span>
                            </div>
                        </div>
                        <div class="game-info">
                            <h3 class="game-title pixel-text">ASTEROIDS</h3>
                            <p class="game-desc">Détruisez des astéroïdes dans l'espace profond !</p>
                            <div class="game-stats">
                                <div class="stat">
                                    <i class="fas fa-users"></i>
                                    <span>7.1K</span>
                                </div>
                                <div class="stat">
                                    <i class="fas fa-star"></i>
                                    <span>4.6</span>
                                </div>
                                <div class="stat">
                                    <i class="fas fa-bolt"></i>
                                    <span>80</span>
                                </div>
                            </div>
                        </div>
                        <button class="play-btn pixel-border" data-game="8" data-cost="320">
                            <i class="fas fa-play"></i> LANCER
                        </button>
                    </div>
                </div>
                
                <!-- Jeu en vedette -->
                <div class="featured-game-section pixel-border">
                    <div class="featured-header">
                        <div class="featured-title">
                            <i class="fas fa-crown"></i>
                            <span class="pixel-text">JEU DU MOMENT</span>
                        </div>
                        <div class="featured-timer">
                            <i class="fas fa-clock"></i>
                            <span id="featuredTimer">24:00</span>
                        </div>
                    </div>
                    
                    <div class="featured-content">
                        <div class="featured-preview">
                            <div class="pacman-animation">
                                <div class="pacman"></div>
                                <div class="ghost red"></div>
                                <div class="ghost pink"></div>
                                <div class="ghost blue"></div>
                                <div class="dots">
                                    <div class="dot"></div>
                                    <div class="dot"></div>
                                    <div class="dot"></div>
                                    <div class="dot"></div>
                                    <div class="dot"></div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="featured-info">
                            <h3 class="featured-game-title pixel-text">PAC-ROMÂN DELUXE</h3>
                            <p class="featured-desc">Edition spéciale avec nouveaux labyrinthes et power-ups exclusifs !</p>
                            <div class="featured-stats">
                                <div class="featured-stat">
                                    <i class="fas fa-coins"></i>
                                    <div>
                                        <div class="stat-value">750</div>
                                        <div class="stat-label">JETONS MAX</div>
                                    </div>
                                </div>
                                <div class="featured-stat">
                                    <i class="fas fa-users"></i>
                                    <div>
                                        <div class="stat-value">1,245</div>
                                        <div class="stat-label">JOUEURS ACTIFS</div>
                                    </div>
                                </div>
                                <div class="featured-stat">
                                    <i class="fas fa-trophy"></i>
                                    <div>
                                        <div class="stat-value">15</div>
                                        <div class="stat-label">SUCCÈS</div>
                                    </div>
                                </div>
                            </div>
                            <button class="featured-play-btn pixel-border" data-game="1" data-cost="500">
                                <i class="fas fa-play"></i> JOUER MAINTENANT (500 JETONS)
                            </button>
                        </div>
                    </div>
                </div>
                
                <!-- Stats rapides -->
                <div class="quick-stats pixel-border">
                    <div class="stat-card">
                        <div class="stat-icon">
                            <i class="fas fa-gamepad"></i>
                        </div>
                        <div class="stat-content">
                            <div class="stat-value" id="totalGames">8</div>
                            <div class="stat-label">JEUX DISPONIBLES</div>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">
                            <i class="fas fa-clock"></i>
                        </div>
                        <div class="stat-content">
                            <div class="stat-value" id="totalPlayTime">0</div>
                            <div class="stat-label">MINUTES DE JEU</div>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">
                            <i class="fas fa-trophy"></i>
                        </div>
                        <div class="stat-content">
                            <div class="stat-value" id="totalAchievements">3</div>
                            <div class="stat-label">SUCCÈS DÉBLOQUÉS</div>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">
                            <i class="fas fa-fire"></i>
                        </div>
                        <div class="stat-content">
                            <div class="stat-value" id="playerStreak">1</div>
                            <div class="stat-label">JOURS DE SÉRIE</div>
                        </div>
                    </div>
                </div>
            </main>
            
            <!-- Pied de page -->
            <footer class="arcade-footer">
                <div class="footer-content pixel-border">
                    <div class="music-player">
                        <div class="now-playing">
                            <i class="fas fa-music"></i>
                            <span class="song-title">ADVENTURE 8-BIT - RETRO WAVE</span>
                            <span class="song-time" id="songTime">02:45</span>
                        </div>
                        <div class="player-controls">
                            <button class="player-btn" id="prevBtn">
                                <i class="fas fa-step-backward"></i>
                            </button>
                            <button class="player-btn" id="playPauseBtn">
                                <i class="fas fa-play"></i>
                            </button>
                            <button class="player-btn" id="nextBtn">
                                <i class="fas fa-step-forward"></i>
                            </button>
                        </div>
                    </div>
                    
                    <div class="footer-info">
                        <div class="system-status">
                            <span class="status-indicator active"></span>
                            <span class="status-text">SYSTÈME ARCADE: ACTIF</span>
                        </div>
                        <div class="copyright">
                            ARCADE RETRO HUB • v1.0 • CRT EMULATION: ON
                        </div>
                    </div>
                </div>
            </footer>
            
            <!-- Sélecteur de thème -->
            <div class="theme-selector pixel-border">
                <div class="theme-option" data-theme="cyan">
                    <div class="theme-sample cyan"></div>
                    <span>CYAN</span>
                </div>
                <div class="theme-option" data-theme="pink">
                    <div class="theme-sample pink"></div>
                    <span>ROSE</span>
                </div>
                <div class="theme-option" data-theme="purple">
                    <div class="theme-sample purple"></div>
                    <span>VIOLET</span>
                </div>
                <div class="theme-option" data-theme="green">
                    <div class="theme-sample green"></div>
                    <span>VERT</span>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Modal de jeu -->
    <div class="modal" id="gameModal">
        <div class="modal-content pixel-border">
            <span class="close-modal">&times;</span>
            <div class="game-modal-header">
                <h3 class="modal-title pixel-text" id="gameModalTitle">CHARGEMENT DU JEU...</h3>
                <div class="game-cost-display">
                    <i class="fas fa-coins"></i>
                    <span id="modalGameCost">0</span> JETONS
                </div>
            </div>
            
            <div class="game-modal-body" id="gameModalBody">
                <div class="game-loading">
                    <div class="loading-pacman">
                        <div class="pacman-loading"></div>
                        <div class="loading-dots">
                            <div class="loading-dot"></div>
                            <div class="loading-dot"></div>
                            <div class="loading-dot"></div>
                        </div>
                    </div>
                    <p class="loading-text">INITIALISATION DU SYSTÈME DE JEU...</p>
                    <div class="loading-bar">
                        <div class="loading-progress" id="loadingProgress"></div>
                    </div>
                </div>
            </div>
            
            <div class="game-modal-footer">
                <button class="modal-btn pixel-border" id="confirmPlayBtn">
                    <i class="fas fa-play"></i> CONFIRMER ET JOUER
                </button>
                <button class="modal-btn pixel-border secondary" id="cancelPlayBtn">
                    <i class="fas fa-times"></i> ANNULER
                </button>
            </div>
        </div>
    </div>

    <style>
        /* Styles CRT de base (déjà inclus précédemment) */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        /* Sélecteur de thème - MODIFIED */
.theme-selector {
    position: fixed; /* Changed from absolute to fixed */
    top: 20px;
    right: 20px;
    display: flex;
    gap: 10px;
    padding: 15px; /* Increased padding */
    background: rgba(0, 0, 0, 0.9); /* Darker background */
    border: 3px solid var(--neon-green); /* Added border */
    z-index: 1000; /* Higher z-index */
    border-radius: 5px;
    box-shadow: 0 0 20px rgba(0, 206, 209, 0.5);
}

/* Add a title to the theme selector */
.theme-selector::before {
    content: 'SELECT THEME:';
    position: absolute;
    top: -25px;
    left: 0;
    color: var(--neon-green);
    font-size: 0.8rem;
    font-family: 'Press Start 2P', monospace;
    white-space: nowrap;
}

        .theme-option {
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 5px;
        cursor: pointer;
        transition: transform 0.3s;
        padding: 5px;
        border: 2px solid transparent;
    }

    .theme-option:hover {
        transform: scale(1.2);
        border-color: var(--crt-text);
    }

    .theme-sample {
        width: 30px; /* Increased size */
        height: 30px; /* Increased size */
        -radius: 50%;
        border: 2px solid #000;
        box-shadow: 0 0 5px rgba(255, 255, 255, 0.3);
    }

    .theme-option.active .theme-sample {
        border-color: #FFFFFF;
        box-shadow: 0 0 15px currentColor;
        animation: pulse 1s infinite;
    }

    @keyframes pulse {
        0%, 100% { transform: scale(1); }
        50% { transform: scale(1.1); }
    }

        .theme-option span {
            font-size: 0.8rem;
            color: var(--crt-text);
            text-transform: uppercase;
            font-family: 'DotGothic16', monospace;
            }
        body {
            font-family: 'DotGothic16', 'Press Start 2P', monospace;
            background: #000;
            color: var(--crt-text);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
            position: relative;
            overflow-x: hidden;
        }

        .crt-frame {
            background: #222;
            border: 20px solid #111;
            border-radius: 10px;
            box-shadow: 
                0 0 100px rgba(0, 206, 209, 0.7),
                0 0 50px rgba(255, 105, 180, 0.5),
                inset 0 0 50px rgba(0, 0, 0, 0.9);
            position: relative;
            width: 100%;
            max-width: 1200px;
        }

        .crt-screen {
            background: #000;
            padding: 30px;
            position: relative;
            overflow: hidden;
            min-height: 800px;
            border: 2px solid #444;
        }

        /* Effets CRT */
        .tube-lines, .scanlines, .glare, .pixel-grid, .tv-noise {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 1;
        }

        .tube-lines {
            background: linear-gradient(
                to bottom,
                transparent 0%,
                rgba(0, 206, 209, 0.03) 50%,
                transparent 100%
            );
        }

        .scanlines {
            background: repeating-linear-gradient(
                0deg,
                rgba(0, 0, 0, 0.15) 0px,
                rgba(0, 0, 0, 0.15) 1px,
                transparent 1px,
                transparent 2px
            );
            animation: scanline 10s linear infinite;
        }

        .glare {
            background: linear-gradient(
                135deg,
                transparent 0%,
                rgba(255, 255, 255, 0.03) 50%,
                transparent 100%
            );
        }

        .pixel-grid {
            background-image: 
                linear-gradient(rgba(0, 206, 209, 0.1) 1px, transparent 1px),
                linear-gradient(90deg, rgba(255, 105, 180, 0.1) 1px, transparent 1px);
            background-size: 8px 8px;
        }

        .tv-noise {
            background: 
                radial-gradient(circle, transparent 0%, #000 100%),
                repeating-radial-gradient(circle at 50% 50%, 
                    rgba(255, 255, 255, 0.02) 0px, 
                    rgba(255, 255, 255, 0.02) 1px, 
                    transparent 1px, 
                    transparent 10px);
            opacity: 0.1;
            animation: noise 0.2s infinite;
        }

        @keyframes scanline {
            0% { transform: translateY(0); }
            100% { transform: translateY(10px); }
        }

        @keyframes noise {
            0% { background-position: 0 0; }
            100% { background-position: 10px 10px; }
        }

        /* Styles communs */
        .pixel-text {
            font-family: 'Press Start 2P', 'DotGothic16', monospace;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .pixel-border {
            border: 2px solid var(--crt-text);
            position: relative;
        }

        .pixel-border::before {
            content: '';
            position: absolute;
            top: 2px;
            left: 2px;
            right: 2px;
            bottom: 2px;
            border: 1px solid #000;
            pointer-events: none;
        }

        .blinking {
            animation: blink 1s infinite;
        }

        @keyframes blink {
            0%, 50% { opacity: 1; }
            51%, 100% { opacity: 0; }
        }

        /* Navigation */
        .arcade-nav {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding: 15px;
            background: rgba(0, 0, 0, 0.7);
            position: relative;
            z-index: 2;
        }

        .nav-btn {
            color: var(--crt-text);
            text-decoration: none;
            padding: 8px 15px;
            font-size: 0.9rem;
            transition: all 0.3s;
            background: rgba(0, 0, 0, 0.7);
        }

        .nav-btn:hover {
            background: var(--retro-cyan);
            color: #000;
            transform: translateY(-2px);
        }

        .nav-title {
            font-size: 1.2rem;
            color: var(--neon-green);
            text-shadow: 0 0 10px var(--neon-green);
        }

        /* En-tête joueur */
        .player-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            flex-wrap: wrap;
            gap: 20px;
        }

        .player-display {
            display: flex;
            align-items: center;
            gap: 20px;
            padding: 15px;
            background: rgba(0, 0, 0, 0.5);
            flex: 1;
            min-width: 300px;
        }

        .player-sprite {
            width: 80px;
            height: 80px;
            background: linear-gradient(45deg, var(--retro-cyan) 0%, var(--retro-purple) 100%);
            border-radius: 50% 50% 50% 50% / 60% 60% 40% 40%;
            position: relative;
            animation: float 3s ease-in-out infinite;
        }

        .player-sprite::before,
        .player-sprite::after {
            content: '';
            position: absolute;
            background: #000;
            border-radius: 50%;
        }

        .player-sprite::before {
            top: 30%;
            left: 25%;
            width: 12px;
            height: 12px;
        }

        .player-sprite::after {
            top: 30%;
            right: 25%;
            width: 12px;
            height: 12px;
        }

        .player-info {
            flex: 1;
        }

        .player-name {
            font-size: 1.4rem;
            color: var(--retro-cyan);
            margin-bottom: 10px;
            text-shadow: 0 0 10px var(--retro-cyan);
        }

        .player-stats {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }

        .stat-chip {
            padding: 8px 15px;
            background: rgba(0, 0, 0, 0.7);
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .stat-chip i {
            color: var(--retro-pink);
        }

        .stat-label {
            font-size: 0.8rem;
            opacity: 0.8;
        }

        .header-actions {
            display: flex;
            gap: 10px;
        }

        .action-btn {
            padding: 10px 20px;
            background: #000;
            color: var(--crt-text);
            border: 2px solid var(--crt-text);
            cursor: pointer;
            transition: all 0.3s;
            font-family: 'DotGothic16', monospace;
        }

        .action-btn:hover {
            background: var(--retro-cyan);
            color: #000;
            transform: translateY(-2px);
        }

        /* Section titre */
        .arcade-title-section {
            text-align: center;
            margin-bottom: 30px;
        }

        .arcade-title {
            font-size: 2.5rem;
            margin-bottom: 10px;
            line-height: 1.2;
        }

        .title-cyan {
            color: var(--retro-cyan);
            text-shadow: 0 0 10px var(--retro-cyan);
        }

        .title-pink {
            color: var(--retro-pink);
            text-shadow: 0 0 10px var(--retro-pink);
        }

        .arcade-subtitle {
            font-size: 1rem;
            color: var(--neon-green);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
        }

        /* Filtres */
        .category-filters {
            padding: 20px;
            background: rgba(0, 0, 0, 0.5);
            margin-bottom: 30px;
        }

        .filters-title {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 15px;
            color: var(--retro-pink);
            font-size: 1.1rem;
        }

        .filter-buttons {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }

        .filter-btn {
            padding: 10px 20px;
            background: rgba(0, 0, 0, 0.7);
            color: var(--crt-text);
            border: 2px solid var(--crt-text);
            cursor: pointer;
            transition: all 0.3s;
            font-family: 'DotGothic16', monospace;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .filter-btn.active {
            background: var(--retro-cyan);
            color: #000;
        }

        .filter-btn:hover:not(.active) {
            background: var(--retro-pink);
            color: #000;
        }

        /* Grille de jeux */
        .games-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 40px;
        }
.game-card {
    background: rgba(0, 0, 0, 0.6);
    padding: 15px;
    transition: all 0.3s;
    position: relative;
}

.game-card.featured {
    border-color: var(--neon-green);
}

.game-card.new {
    border-color: var(--retro-pink);
}

.game-card:hover {
    transform: translateY(-5px);
    box-shadow: 0 10px 20px rgba(0, 206, 209, 0.3);
}

.game-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 15px;
}

.game-badge {
    background: var(--retro-cyan);
    color: #000;
    padding: 3px 8px;
    font-size: 0.7rem;
    font-weight: bold;
}

.game-badge.new-badge {
    background: var(--retro-pink);
}

.badge-text {
    font-family: 'Press Start 2P', monospace;
}

.game-icon {
    width: 50px;
    height: 50px;
    border-radius: 10px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 1.5rem;
    background: linear-gradient(135deg, var(--retro-cyan), var(--retro-purple));
}

.game-cost {
    display: flex;
    align-items: center;
    gap: 5px;
    color: var(--retro-pink);
    font-size: 0.9rem;
}

.game-info {
    margin-bottom: 15px;
}

.game-title {
    font-size: 1.1rem;
    color: var(--neon-green);
    margin-bottom: 8px;
}

.game-desc {
    font-size: 0.8rem;
    color: var(--crt-text);
    opacity: 0.8;
    line-height: 1.4;
    margin-bottom: 12px;
}

.game-stats {
    display: flex;
    justify-content: space-between;
    gap: 10px;
}

.stat {
    display: flex;
    align-items: center;
    gap: 5px;
    font-size: 0.8rem;
    color: var(--crt-text);
}

.stat i {
    color: var(--retro-pink);
}

.play-btn {
    width: 100%;
    padding: 10px;
    background: #000;
    color: var(--crt-text);
    border: 2px solid var(--crt-text);
    cursor: pointer;
    transition: all 0.3s;
    font-family: 'DotGothic16', monospace;
    font-size: 0.9rem;
}

.play-btn:hover {
    background: var(--neon-green);
    color: #000;
    transform: scale(1.05);
}

/* Section jeu en vedette */
.featured-game-section {
    background: rgba(0, 0, 0, 0.5);
    padding: 20px;
    margin-bottom: 30px;
}

.featured-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 20px;
    padding-bottom: 10px;
    border-bottom: 2px solid var(--retro-cyan);
}

.featured-title {
    display: flex;
    align-items: center;
    gap: 10px;
    color: var(--neon-green);
    font-size: 1.2rem;
}

.featured-timer {
    display: flex;
    align-items: center;
    gap: 8px;
    color: var(--retro-pink);
    font-family: 'Press Start 2P', monospace;
}

.featured-content {
    display: grid;
    grid-template-columns: 1fr 2fr;
    gap: 30px;
    align-items: center;
}

.featured-preview {
    display: flex;
    justify-content: center;
    align-items: center;
}

.pacman-animation {
    width: 150px;
    height: 150px;
    position: relative;
    background: rgba(0, 0, 0, 0.8);
    border-radius: 10px;
    overflow: hidden;
}

.pacman {
    position: absolute;
    top: 50%;
    left: 20%;
    transform: translateY(-50%);
    width: 30px;
    height: 30px;
    background: #FFD700;
    border-radius: 50%;
    animation: pacman-move 3s infinite;
}

@keyframes pacman-move {
    0%, 100% { left: 20%; }
    50% { left: 70%; }
}

.ghost {
    position: absolute;
    width: 25px;
    height: 25px;
    border-radius: 50% 50% 0 0;
    animation: ghost-float 2s infinite;
}

.ghost.red {
    background: #FF0000;
    top: 30%;
    left: 40%;
    animation-delay: 0s;
}

.ghost.pink {
    background: #FF69B4;
    top: 60%;
    left: 60%;
    animation-delay: 0.5s;
}

.ghost.blue {
    background: #00CED1;
    top: 40%;
    left: 80%;
    animation-delay: 1s;
}

@keyframes ghost-float {
    0%, 100% { transform: translateY(0); }
    50% { transform: translateY(-10px); }
}

.dots {
    position: absolute;
    top: 50%;
    left: 30%;
    display: flex;
    gap: 15px;
}

.dot {
    width: 8px;
    height: 8px;
    background: #FFF;
    border-radius: 50%;
    animation: dot-blink 1s infinite;
}

.dot:nth-child(2) { animation-delay: 0.2s; }
.dot:nth-child(3) { animation-delay: 0.4s; }
.dot:nth-child(4) { animation-delay: 0.6s; }
.dot:nth-child(5) { animation-delay: 0.8s; }

@keyframes dot-blink {
    0%, 100% { opacity: 1; }
    50% { opacity: 0.3; }
}

.featured-info {
    padding: 10px;
}

.featured-game-title {
    font-size: 1.5rem;
    color: var(--neon-green);
    margin-bottom: 10px;
    text-shadow: 0 0 10px var(--neon-green);
}

.featured-desc {
    font-size: 0.9rem;
    color: var(--crt-text);
    margin-bottom: 20px;
    line-height: 1.4;
}

.featured-stats {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 15px;
    margin-bottom: 25px;
}

.featured-stat {
    display: flex;
    align-items: center;
    gap: 10px;
    padding: 10px;
    background: rgba(0, 0, 0, 0.3);
}

.featured-stat i {
    font-size: 1.5rem;
    color: var(--retro-pink);
}

.stat-value {
    font-size: 1.2rem;
    font-weight: bold;
    color: var(--neon-green);
}

.stat-label {
    font-size: 0.7rem;
    color: var(--crt-text);
    opacity: 0.8;
}

.featured-play-btn {
    width: 100%;
    padding: 15px;
    background: linear-gradient(135deg, var(--retro-cyan), var(--retro-purple));
    color: #000;
    border: none;
    cursor: pointer;
    transition: all 0.3s;
    font-family: 'DotGothic16', monospace;
    font-size: 1rem;
    font-weight: bold;
}

.featured-play-btn:hover {
    transform: scale(1.05);
    box-shadow: 0 5px 15px rgba(0, 206, 209, 0.5);
}

/* Stats rapides */
.quick-stats {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 15px;
    margin-bottom: 30px;
    padding: 20px;
    background: rgba(0, 0, 0, 0.5);
}

.stat-card {
    display: flex;
    align-items: center;
    gap: 15px;
    padding: 15px;
    background: rgba(0, 0, 0, 0.7);
}

.stat-icon {
    font-size: 2rem;
    color: var(--retro-pink);
}

.stat-content {
    flex: 1;
}

.stat-value {
    font-size: 2rem;
    font-family: 'Press Start 2P', monospace;
    color: var(--neon-green);
    margin-bottom: 5px;
}

/* Pied de page */
.arcade-footer {
    margin-top: 30px;
}

.footer-content {
    padding: 20px;
    background: rgba(0, 0, 0, 0.5);
}

.music-player {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 15px;
    padding: 10px;
    background: rgba(0, 0, 0, 0.7);
}

.now-playing {
    display: flex;
    align-items: center;
    gap: 10px;
    color: var(--crt-text);
}

.song-title {
    color: var(--neon-green);
}

.song-time {
    font-family: 'Press Start 2P', monospace;
    color: var(--retro-pink);
}

.player-controls {
    display: flex;
    gap: 10px;
}

.player-btn {
    width: 40px;
    height: 40px;
    background: #000;
    color: var(--crt-text);
    border: 2px solid var(--crt-text);
    border-radius: 50%;
    cursor: pointer;
    transition: all 0.3s;
}

.player-btn:hover {
    background: var(--retro-cyan);
    color: #000;
}

.footer-info {
    display: flex;
    justify-content: space-between;
    align-items: center;
    flex-wrap: wrap;
    gap: 15px;
}

.system-status {
    display: flex;
    align-items: center;
    gap: 10px;
}

.status-indicator {
    width: 10px;
    height: 10px;
    background: var(--neon-green);
    border-radius: 50%;
    animation: status-pulse 2s infinite;
}

@keyframes status-pulse {
    0%, 100% { opacity: 1; }
    50% { opacity: 0.5; }
}

.status-text {
    color: var(--crt-text);
    font-size: 0.8rem;
}

.copyright {
    font-size: 0.7rem;
    color: var(--crt-text);
    opacity: 0.6;
}

/* Sélecteur de thème */
.theme-selector {
    position: absolute;
    top: 20px;
    right: 20px;
    display: flex;
    gap: 10px;
    padding: 10px;
    background: rgba(0, 0, 0, 0.7);
    z-index: 10;
}

.theme-option {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 5px;
    cursor: pointer;
    transition: transform 0.3s;
}

.theme-option:hover {
    transform: scale(1.1);
}

.theme-sample {
    width: 20px;
    height: 20px;
    border-radius: 50%;
    border: 2px solid transparent;
}

.theme-sample.cyan {
    background: var(--retro-cyan);
}

.theme-sample.pink {
    background: var(--retro-pink);
}

.theme-sample.purple {
    background: var(--retro-purple);
}

.theme-sample.green {
    background: var(--neon-green);
}

.theme-option.active .theme-sample {
    border-color: var(--crt-text);
    box-shadow: 0 0 10px currentColor;
}

/* Modal de jeu */
.modal {
    display: none;
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.95);
    z-index: 1000;
    justify-content: center;
    align-items: center;
    backdrop-filter: blur(5px);
}

.modal-content {
    background: #000;
    padding: 30px;
    max-width: 600px;
    width: 90%;
    position: relative;
    border: 3px solid var(--neon-green);
}

.close-modal {
    position: absolute;
    top: 15px;
    right: 20px;
    font-size: 1.8rem;
    color: var(--retro-pink);
    cursor: pointer;
    transition: color 0.3s;
}

.close-modal:hover {
    color: var(--neon-green);
}

.game-modal-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 20px;
    padding-bottom: 15px;
    border-bottom: 2px solid var(--retro-cyan);
}

.modal-title {
    color: var(--neon-green);
    font-size: 1.3rem;
}

.game-cost-display {
    display: flex;
    align-items: center;
    gap: 8px;
    color: var(--retro-pink);
    font-size: 1.1rem;
}

.game-modal-body {
    margin-bottom: 25px;
}

.game-loading {
    text-align: center;
}

.loading-pacman {
    display: inline-block;
    margin-bottom: 20px;
}

.pacman-loading {
    width: 40px;
    height: 40px;
    background: #FFD700;
    border-radius: 50%;
    position: relative;
    animation: pacman-chew 0.5s infinite;
    margin: 0 auto 15px;
}

@keyframes pacman-chew {
    0%, 100% { transform: scale(1); }
    50% { transform: scale(0.8); }
}

.loading-dots {
    display: flex;
    justify-content: center;
    gap: 10px;
}

.loading-dot {
    width: 10px;
    height: 10px;
    background: var(--neon-green);
    border-radius: 50%;
    animation: dot-loading 1.5s infinite;
}

.loading-dot:nth-child(2) { animation-delay: 0.2s; }
.loading-dot:nth-child(3) { animation-delay: 0.4s; }

@keyframes dot-loading {
    0%, 100% { opacity: 0.3; transform: scale(0.8); }
    50% { opacity: 1; transform: scale(1); }
}

.loading-text {
    color: var(--crt-text);
    margin-bottom: 15px;
    font-size: 0.9rem;
}

.loading-bar {
    width: 100%;
    height: 10px;
    background: rgba(0, 0, 0, 0.5);
    border: 1px solid var(--crt-text);
}

.loading-progress {
    height: 100%;
    background: linear-gradient(90deg, var(--retro-cyan), var(--neon-green));
    width: 0%;
    transition: width 0.3s;
}

.game-modal-footer {
    display: flex;
    gap: 15px;
    justify-content: center;
}

.modal-btn {
    padding: 12px 25px;
    background: #000;
    color: var(--crt-text);
    border: 2px solid var(--crt-text);
    cursor: pointer;
    transition: all 0.3s;
    font-family: 'DotGothic16', monospace;
    font-size: 0.9rem;
}

.modal-btn:hover {
    background: var(--neon-green);
    color: #000;
    transform: translateY(-2px);
}

.modal-btn.secondary {
    border-color: var(--retro-pink);
}

.modal-btn.secondary:hover {
    background: var(--retro-pink);
}

/* Responsive */
@media (max-width: 1024px) {
    .featured-content {
        grid-template-columns: 1fr;
    }
    
    .pacman-animation {
        width: 120px;
        height: 120px;
    }
}

@media (max-width: 768px) {
    .crt-frame {
        border: 10px solid #111;
    }
    
    .crt-screen {
        padding: 15px;
    }
    
    .arcade-title {
        font-size: 1.8rem;
    }
    
    .games-grid {
        grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
    }
    
    .player-header {
        flex-direction: column;
        align-items: stretch;
    }
    
    .player-display {
        min-width: auto;
    }
    
    .header-actions {
        justify-content: center;
    }
    
    .theme-selector {
        position: relative;
        top: auto;
        right: auto;
        margin-top: 20px;
        justify-content: center;
    }
}

@media (max-width: 480px) {
    .games-grid {
        grid-template-columns: 1fr;
    }
    
    .featured-stats {
        grid-template-columns: 1fr;
    }
    
    .filter-buttons {
        justify-content: center;
    }
    
    .quick-stats {
        grid-template-columns: 1fr;
    }
    
    .footer-info {
        flex-direction: column;
        text-align: center;
    }
    
    .music-player {
        flex-direction: column;
        gap: 10px;
    }
}

/* Animation du personnage */
@keyframes float {
    0%, 100% { transform: translateY(0); }
    50% { transform: translateY(-10px); }
}

/* Effet de dégradation CRT */
.crt-screen::after {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: linear-gradient(
        rgba(18, 16, 16, 0) 50%,
        rgba(0, 0, 0, 0.25) 50%
    );
    background-size: 100% 4px;
    pointer-events: none;
    z-index: 3;
}
    </style>

    <script>
        // JavaScript pour le hub d'arcade
        document.addEventListener('DOMContentLoaded', function() {
            
            // Effet d'allumage CRT
            const crtScreen = document.querySelector('.crt-screen');
            crtScreen.style.animation = 'crt-power-on 2s ease-out';
            
            // Initialisation du personnage
            const playerSprite = document.getElementById('arcadePlayerSprite');
            const savedColor = localStorage.getItem('playerColor') || 'cyan';
            updateSpriteColor(savedColor);
            
            // Charger les données utilisateur
            loadUserData();
            
            // Filtres de catégories
            const filterButtons = document.querySelectorAll('.filter-btn');
            const gameCards = document.querySelectorAll('.game-card');
            
            filterButtons.forEach(button => {
                button.addEventListener('click', function() {
                    // Retirer active de tous les boutons
                    filterButtons.forEach(btn => btn.classList.remove('active'));
                    
                    // Ajouter active au bouton cliqué
                    this.classList.add('active');
                    
                    // Filtrer les jeux
                    const filter = this.getAttribute('data-filter');
                    filterGames(filter);
                    
                    // Son de sélection
                    playRetroSound('select');
                });
            });
            
            function filterGames(filter) {
                gameCards.forEach(card => {
                    if (filter === 'all') {
                        card.style.display = 'block';
                    } else {
                        const category = card.getAttribute('data-category');
                        if (category === filter) {
                            card.style.display = 'block';
                        } else {
                            card.style.display = 'none';
                        }
                    }
                });
            }
            
            // Boutons de jeu
            const playButtons = document.querySelectorAll('.play-btn, .featured-play-btn');
            const gameModal = document.getElementById('gameModal');
            const confirmPlayBtn = document.getElementById('confirmPlayBtn');
            const cancelPlayBtn = document.getElementById('cancelPlayBtn');
            const closeModal = document.querySelector('.close-modal');
            
            let selectedGame = null;
            let selectedCost = 0;
            
            playButtons.forEach(button => {
                button.addEventListener('click', function() {
                    selectedGame = this.getAttribute('data-game');
                    selectedCost = parseInt(this.getAttribute('data-cost'));
                    
                    // Vérifier les jetons
                    const currentTokens = parseInt(document.getElementById('arcadeTokens').textContent);
                    
                    if (currentTokens < selectedCost) {
                        // Pas assez de jetons
                        showError('JETONS INSUFFISANTS !');
                        playRetroSound('error');
                        return;
                    }
                    
                    // Afficher le modal
                    document.getElementById('modalGameCost').textContent = selectedCost;
                    document.getElementById('gameModalTitle').textContent = 'CONFIRMER LE JEU';
                    gameModal.style.display = 'flex';
                    
                    // Lancer l'animation de chargement
                    startLoadingAnimation();
                    
                    playRetroSound('select');
                });
            });
            
            // Confirmer le jeu
            if (confirmPlayBtn) {
                confirmPlayBtn.addEventListener('click', function() {
                    if (selectedGame) {
                        // Déduire les jetons
                        deductTokens(selectedCost);
                        
                        // Enregistrer la partie
                        saveGameSession(selectedGame, selectedCost);
                        
                        // Rediriger vers le jeu
                        redirectToGame(selectedGame);
                        
                        playRetroSound('success');
                    }
                });
            }
            
            // Annuler le jeu
            if (cancelPlayBtn) {
                cancelPlayBtn.addEventListener('click', function() {
                    gameModal.style.display = 'none';
                    playRetroSound('click');
                });
            }
            
            // Fermer le modal
            if (closeModal) {
                closeModal.addEventListener('click', function() {
                    gameModal.style.display = 'none';
                    playRetroSound('click');
                });
            }
            
            // Fermer le modal en cliquant dehors
            window.addEventListener('click', function(event) {
                if (event.target === gameModal) {
                    gameModal.style.display = 'none';
                    playRetroSound('click');
                }
            });
            
            // Animation de chargement
            function startLoadingAnimation() {
                const progressBar = document.getElementById('loadingProgress');
                let progress = 0;
                
                const interval = setInterval(() => {
                    progress += Math.random() * 20;
                    if (progress >= 100) {
                        progress = 100;
                        clearInterval(interval);
                        
                        // Changer le texte quand chargement terminé
                        document.getElementById('gameModalTitle').textContent = 'PRÊT À JOUER !';
                    }
                    
                    progressBar.style.width = `${progress}%`;
                }, 200);
            }
            
            // Déduire les jetons
            function deductTokens(amount) {
                const tokenElement = document.getElementById('arcadeTokens');
                const currentTokens = parseInt(tokenElement.textContent);
                const newTokens = currentTokens - amount;
                
                tokenElement.textContent = newTokens;
                localStorage.setItem('arcadeTokens', newTokens);
                
                // Animation de déduction
                tokenElement.style.color = '#FF69B4';
                setTimeout(() => {
                    tokenElement.style.color = '';
                }, 500);
            }
            
            // Sauvegarder la session de jeu
            function saveGameSession(gameId, cost) {
                try {
                    const gameData = {
                        gameId: gameId,
                        cost: cost,
                        date: new Date().toISOString(),
                        username: localStorage.getItem('arcadeUsername') || 'JOUEUR'
                    };
                    
                    // Ajouter à l'historique
                    const history = JSON.parse(localStorage.getItem('gameHistory') || '[]');
                    history.push(gameData);
                    localStorage.setItem('gameHistory', JSON.stringify(history));
                    
                    // Mettre à jour les statistiques
                    updateStatistics();
                    
                } catch (error) {
                    console.error('Erreur de sauvegarde:', error);
                }
            }
            
            // Rediriger vers le jeu
            function redirectToGame(gameId) {
                const gameUrls = {
                    '1': 'C:/xampp/htdocs/PacMan-game-main/index.html',
                    '2': 'C:/xampp/htdocs/SnakeGame---JavaScript-main/index.html',
                    '3': 'C:/xampp/htdocs/SpaceInvaders-master/index.html',
                    '4': 'C:/xampp/htdocs/javascript-tetris-main/index.html',
                    '5': 'C:/xampp/htdocs/breakout-web-game-main/index.html',
                    '6': 'C:/xampp/htdocs/retro-ping-pong-game-master/index.html',
                    '7': 'games/maze-runner/index.html',
                    '8': 'C:/xampp/htdocs/asteroids-main/index.html'
                };
                
                const url = gameUrls[gameId];
                if (url) {
                    // Animation de transition
                    document.body.style.opacity = '0.7';
                    
                    setTimeout(() => {
                        window.location.href = url;
                    }, 500);
                }
            }
            
            // Bouton insérer jeton
            const insertCoinBtn = document.getElementById('insertCoinBtn');
            if (insertCoinBtn) {
                insertCoinBtn.addEventListener('click', function() {
                    // Ajouter des jetons
                    addTokens(100);
                    
                    // Animation
                    this.innerHTML = '<i class="fas fa-coins"></i> JETON INSÉRÉ !';
                    this.style.background = '#39FF14';
                    this.style.color = '#000';
                    
                    playRetroSound('coin');
                    
                    setTimeout(() => {
                        this.innerHTML = '<i class="fas fa-coins"></i> INSÉRER JETON';
                        this.style.background = '';
                        this.style.color = '';
                    }, 1500);
                });
            }
            
            // Ajouter des jetons
            function addTokens(amount) {
                const tokenElement = document.getElementById('arcadeTokens');
                const currentTokens = parseInt(tokenElement.textContent);
                const newTokens = currentTokens + amount;
                
                tokenElement.textContent = newTokens;
                localStorage.setItem('arcadeTokens', newTokens);
                
                // Animation d'ajout
                tokenElement.style.transform = 'scale(1.2)';
                setTimeout(() => {
                    tokenElement.style.transform = 'scale(1)';
                }, 300);
            }
            
            // Charger les données utilisateur
            function loadUserData() {
                // Nom d'utilisateur
                const username = localStorage.getItem('arcadeUsername') || 'JOUEUR_01';
                document.getElementById('arcadeUsername').textContent = username.toUpperCase();
                
                // Jetons
                const tokens = parseInt(localStorage.getItem('arcadeTokens') || '1000');
                document.getElementById('arcadeTokens').textContent = tokens;
                
                // Mettre à jour les statistiques
                updateStatistics();
                
                // Timer du jeu en vedette
                startFeaturedTimer();
                
                // Lecteur de musique
                setupMusicPlayer();
            }
            
            // Mettre à jour les statistiques
            function updateStatistics() {
                try {
                    // Calculer le temps de jeu total
                    const history = JSON.parse(localStorage.getItem('gameHistory') || '[]');
                    const totalPlayTime = history.length * 5; // 5 minutes par jeu
                    document.getElementById('totalPlayTime').textContent = totalPlayTime;
                    
                    // Calculer les succès
                    const achievements = JSON.parse(localStorage.getItem('achievements') || '[]');
                    document.getElementById('totalAchievements').textContent = achievements.length || 3;
                    
                    // Calculer la série
                    const lastPlay = localStorage.getItem('lastPlayDate');
                    const today = new Date().toDateString();
                    let streak = 1;
                    
                    if (lastPlay === today) {
                        streak = parseInt(localStorage.getItem('playStreak') || '1');
                    } else if (lastPlay) {
                        const lastDate = new Date(lastPlay);
                        const diffDays = Math.floor((new Date() - lastDate) / (1000 * 60 * 60 * 24));
                        
                        if (diffDays === 1) {
                            streak = parseInt(localStorage.getItem('playStreak') || '1') + 1;
                        } else {
                            streak = 1;
                        }
                    }
                    
                    document.getElementById('playerStreak').textContent = streak;
                    localStorage.setItem('playStreak', streak);
                    localStorage.setItem('lastPlayDate', today);
                    
                } catch (error) {
                    console.error('Erreur de mise à jour des stats:', error);
                }
            }
            
            // Timer du jeu en vedette
            function startFeaturedTimer() {
                const timerElement = document.getElementById('featuredTimer');
                let minutes = 24;
                let seconds = 0;
                
                setInterval(() => {
                    seconds--;
                    if (seconds < 0) {
                        minutes--;
                        seconds = 59;
                    }
                    
                    if (minutes < 0) {
                        minutes = 23;
                        seconds = 59;
                    }
                    
                    timerElement.textContent = `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
                    
                    // Clignotement des dernières minutes
                    if (minutes === 0 && seconds <= 30) {
                        timerElement.style.color = '#FF69B4';
                        timerElement.classList.add('blinking');
                    } else {
                        timerElement.style.color = '';
                        timerElement.classList.remove('blinking');
                    }
                }, 1000);
            }
            
            // Lecteur de musique
            function setupMusicPlayer() {
                const playPauseBtn = document.getElementById('playPauseBtn');
                const prevBtn = document.getElementById('prevBtn');
                const nextBtn = document.getElementById('nextBtn');
                const songTime = document.getElementById('songTime');
                
                const songs = [
                    'ADVENTURE 8-BIT - RETRO WAVE',
                    'CYBER PUNK DREAMS - SYNTHWAVE',
                    'NEON NIGHTS - OUTRUN',
                    'DIGITAL DREAMS - CHILLWAVE'
                ];
                
                let currentSong = 0;
                let isPlaying = true;
                
                // Simulation du temps de chanson
                let currentTime = 165; // 2:45 en secondes
                
                setInterval(() => {
                    if (isPlaying) {
                        currentTime++;
                        if (currentTime >= 180) { // 3 minutes
                            currentTime = 0;
                            currentSong = (currentSong + 1) % songs.length;
                            updateSongDisplay();
                        }
                        
                        const minutes = Math.floor(currentTime / 60);
                        const seconds = currentTime % 60;
                        songTime.textContent = `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
                    }
                }, 1000);
                
                // Play/Pause
                playPauseBtn.addEventListener('click', function() {
                    isPlaying = !isPlaying;
                    this.innerHTML = isPlaying ? 
                        '<i class="fas fa-pause"></i>' : 
                        '<i class="fas fa-play"></i>';
                    
                    document.getElementById('musicToggle').innerHTML = 
                        `<i class="fas fa-volume-${isPlaying ? 'up' : 'mute'}"></i> SON: ${isPlaying ? 'ON' : 'OFF'}`;
                    
                    playRetroSound('select');
                });
                
                // Précédent
                prevBtn.addEventListener('click', function() {
                    currentSong = (currentSong - 1 + songs.length) % songs.length;
                    currentTime = 0;
                    updateSongDisplay();
                    playRetroSound('select');
                });
                
                // Suivant
                nextBtn.addEventListener('click', function() {
                    currentSong = (currentSong + 1) % songs.length;
                    currentTime = 0;
                    updateSongDisplay();
                    playRetroSound('select');
                });
                
                function updateSongDisplay() {
                    document.querySelector('.song-title').textContent = songs[currentSong];
                }
                
                // Bouton toggle musique
                const musicToggle = document.getElementById('musicToggle');
                musicToggle.addEventListener('click', function() {
                    isPlaying = !isPlaying;
                    playPauseBtn.innerHTML = isPlaying ? 
                        '<i class="fas fa-pause"></i>' : 
                        '<i class="fas fa-play"></i>';
                    
                    this.innerHTML = 
                        `<i class="fas fa-volume-${isPlaying ? 'up' : 'mute'}"></i> SON: ${isPlaying ? 'ON' : 'OFF'}`;
                    
                    playRetroSound('select');
                });
            }
            
            // Sélecteur de thème
            const themeOptions = document.querySelectorAll('.theme-option');
            
            themeOptions.forEach(option => {
                option.addEventListener('click', function() {
                    // Retirer active de toutes les options
                    themeOptions.forEach(opt => opt.classList.remove('active'));
                    
                    // Ajouter active à l'option cliquée
                    this.classList.add('active');
                    
                    // Changer le thème
                    const theme = this.getAttribute('data-theme');
                    changeTheme(theme);
                    
                    // Sauvegarder la préférence
                    localStorage.setItem('arcadeTheme', theme);
                    
                    // Son de sélection
                    playRetroSound('select');
                });
            });
            
            // Charger le thème sauvegardé
            const savedTheme = localStorage.getItem('arcadeTheme');
            if (savedTheme) {
                const savedOption = document.querySelector(`.theme-option[data-theme="${savedTheme}"]`);
                if (savedOption) {
                    savedOption.classList.add('active');
                    changeTheme(savedTheme);
                }
            } else {
                themeOptions[0].classList.add('active');
            }
            
            function changeTheme(theme) {
                const root = document.documentElement;
                
                switch(theme) {
                    case 'cyan':
                        root.style.setProperty('--retro-cyan', '#00CED1');
                        break;
                    case 'pink':
                        root.style.setProperty('--retro-cyan', '#FF69B4');
                        break;
                    case 'purple':
                        root.style.setProperty('--retro-cyan', '#8A2BE2');
                        break;
                    case 'green':
                        root.style.setProperty('--retro-cyan', '#39FF14');
                        break;
                }
            }
            
            // Mettre à jour la couleur du sprite
            function updateSpriteColor(color) {
                let gradient;
                
                switch(color) {
                    case 'cyan':
                        gradient = 'linear-gradient(45deg, #00CED1 0%, #20B2AA 100%)';
                        break;
                    case 'pink':
                        gradient = 'linear-gradient(45deg, #FF69B4 0%, #FF1493 100%)';
                        break;
                    case 'purple':
                        gradient = 'linear-gradient(45deg, #8A2BE2 0%, #9370DB 100%)';
                        break;
                    case 'green':
                        gradient = 'linear-gradient(45deg, #39FF14 0%, #32CD32 100%)';
                        break;
                }
                
                if (playerSprite) {
                    playerSprite.style.background = gradient;
                }
            }
            
            // Afficher une erreur
            function showError(message) {
                const errorDiv = document.createElement('div');
                errorDiv.className = 'error-message pixel-border';
                errorDiv.innerHTML = `
                    <i class="fas fa-exclamation-triangle"></i>
                    <span>${message}</span>
                `;
                errorDiv.style.position = 'fixed';
                errorDiv.style.top = '50%';
                errorDiv.style.left = '50%';
                errorDiv.style.transform = 'translate(-50%, -50%)';
                errorDiv.style.background = '#000';
                errorDiv.style.padding = '20px';
                errorDiv.style.zIndex = '2000';
                errorDiv.style.borderColor = '#FF69B4';
                
                document.body.appendChild(errorDiv);
                
                // Animation
                errorDiv.style.opacity = '0';
                errorDiv.style.transform = 'translate(-50%, -40%)';
                
                setTimeout(() => {
                    errorDiv.style.opacity = '1';
                    errorDiv.style.transform = 'translate(-50%, -50%)';
                }, 10);
                
                // Supprimer après 3 secondes
                setTimeout(() => {
                    errorDiv.style.opacity = '0';
                    errorDiv.style.transform = 'translate(-50%, -60%)';
                    setTimeout(() => {
                        document.body.removeChild(errorDiv);
                    }, 300);
                }, 3000);
            }
            
            // Effet de bruit CRT aléatoire
            function randomCRTNoise() {
                const noise = document.querySelector('.tv-noise');
                if (noise) {
                    setInterval(() => {
                        const randomX = Math.random() * 10;
                        const randomY = Math.random() * 10;
                        noise.style.backgroundPosition = `${randomX}px ${randomY}px`;
                    }, 50);
                }
            }
            
            // Effet de scintillement aléatoire
            setInterval(() => {
                const pixelTexts = document.querySelectorAll('.pixel-text');
                const randomText = pixelTexts[Math.floor(Math.random() * pixelTexts.length)];
                if (randomText) {
                    randomText.style.opacity = '0.7';
                    setTimeout(() => {
                        randomText.style.opacity = '1';
                    }, 100);
                }
            }, 300);
            
            // Effet de vibration sur hover des boutons
            const buttons = document.querySelectorAll('.action-btn, .nav-btn, .play-btn, .filter-btn');
            buttons.forEach(button => {
                button.addEventListener('mouseenter', () => {
                    button.style.transform = 'translateY(-2px) scale(1.05)';
                    playRetroSound('click');
                });
                
                button.addEventListener('mouseleave', () => {
                    button.style.transform = '';
                });
            });
            
            // Animation des cartes de jeu
            setInterval(() => {
                const gameCards = document.querySelectorAll('.game-card');
                gameCards.forEach(card => {
                    if (Math.random() < 0.1) {
                        card.style.transform = 'translateY(-3px)';
                        setTimeout(() => {
                            card.style.transform = '';
                        }, 300);
                    }
                });
            }, 2000);
            
            // Mettre à jour l'énergie du joueur
            function updatePlayerEnergy() {
                const energyElement = document.getElementById('playerEnergy');
                let energy = parseInt(localStorage.getItem('playerEnergy') || '100');
                
                // Réduire l'énergie au fil du temps
                energy = Math.max(0, energy - 1);
                energyElement.textContent = energy;
                localStorage.setItem('playerEnergy', energy);
                
                // Recharger l'énergie après un certain temps
                if (energy < 20) {
                    energyElement.style.color = '#FF69B4';
                    energyElement.classList.add('blinking');
                } else {
                    energyElement.style.color = '';
                    energyElement.classList.remove('blinking');
                }
            }
            
            // Recharger l'énergie
            setInterval(updatePlayerEnergy, 60000); // Toutes les minutes
            
            // Recharger l'énergie quand on insère un jeton
            if (insertCoinBtn) {
                insertCoinBtn.addEventListener('click', function() {
                    let energy = parseInt(localStorage.getItem('playerEnergy') || '100');
                    energy = Math.min(100, energy + 20);
                    localStorage.setItem('playerEnergy', energy);
                    document.getElementById('playerEnergy').textContent = energy;
                });
            }
            
            // Simulation de sons rétro
            function playRetroSound(type) {
                try {
                    const audioContext = new (window.AudioContext || window.webkitAudioContext)();
                    
                    switch(type) {
                        case 'select':
                            playBeep(audioContext, 800, 100, 0.2);
                            break;
                        case 'click':
                            playBeep(audioContext, 600, 50, 0.1);
                            break;
                        case 'coin':
                            playCoinSound(audioContext);
                            break;
                        case 'success':
                            playSuccessSound(audioContext);
                            break;
                        case 'error':
                            playErrorSound(audioContext);
                            break;
                    }
                } catch (e) {
                    console.log('Audio context non supporté');
                }
            }
            
            function playBeep(audioContext, frequency, duration, volume) {
                const oscillator = audioContext.createOscillator();
                const gainNode = audioContext.createGain();
                
                oscillator.connect(gainNode);
                gainNode.connect(audioContext.destination);
                
                oscillator.frequency.setValueAtTime(frequency, audioContext.currentTime);
                gainNode.gain.setValueAtTime(volume, audioContext.currentTime);
                gainNode.gain.exponentialRampToValueAtTime(0.001, audioContext.currentTime + duration / 1000);
                
                oscillator.start();
                oscillator.stop(audioContext.currentTime + duration / 1000);
            }
            
            function playCoinSound(audioContext) {
                const frequencies = [500, 750, 1000];
                const durations = [80, 60, 40];
                
                frequencies.forEach((freq, index) => {
                    setTimeout(() => {
                        playBeep(audioContext, freq, durations[index], 0.3);
                    }, index * 50);
                });
            }
            
            function playSuccessSound(audioContext) {
                const frequencies = [800, 1200, 1600];
                const duration = 100;
                
                frequencies.forEach((freq, index) => {
                    setTimeout(() => {
                        playBeep(audioContext, freq, duration, 0.2);
                    }, index * duration);
                });
            }
            
            function playErrorSound(audioContext) {
                const frequencies = [400, 300, 200];
                const duration = 150;
                
                frequencies.forEach((freq, index) => {
                    setTimeout(() => {
                        playBeep(audioContext, freq, duration, 0.3);
                    }, index * duration);
                });
            }
            
            // Message aléatoire de bienvenue
            const welcomeMessages = [
                "HUB D'ARCADE ACTIF",
                "SYSTEM READY FOR GAMING",
                "INSERT COIN TO PLAY",
                "8-BIT ADVENTURE AWAITS",
                "SELECT YOUR GAME"
            ];
            
            const navTitle = document.querySelector('.nav-title');
            if (navTitle) {
                setInterval(() => {
                    const randomMsg = welcomeMessages[Math.floor(Math.random() * welcomeMessages.length)];
                    navTitle.innerHTML = `<i class="fas fa-gamepad"></i> ${randomMsg}`;
                    setTimeout(() => {
                        navTitle.innerHTML = `<i class="fas fa-gamepad"></i> HUB D'ARCADE`;
                    }, 3000);
                }, 15000);
            }
            
            // Initialisation
            randomCRTNoise();
            updatePlayerEnergy();
            
            // Effet d'allumage CRT
            setTimeout(() => {
                crtScreen.style.animation = '';
            }, 2000);
        });
    </script>
    
</body>
</html>